# æ¸›ä¾¡å„Ÿå´è¨ˆç®—ã‚¢ãƒ—ãƒª - è¦ä»¶å®šç¾©ãƒ»æŠ€è¡“é¸å®šæ›¸

ã‚¢ãƒ—ãƒªåã€Œã«ã¡ã‚ã‚Šï¼ã€

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### 1.1 ç›®çš„

ç‰©ã‚’è²·ã†ã¨ãã«æ¸›ä¾¡å„Ÿå´ç†è«–ã«åŸºã¥ã„ã¦ã€ä½•å¹´æŒã¤ã‹ã‹ã‚‰æ—¥å‰²ã‚Šæ›ç®—ã—ã¦ã€æœ¬å½“ã«å¿…è¦ã‹ã©ã†ã‹ã€è²·ã£ãŸæ–¹ãŒãŠå¾—ã‹ãƒ»è‡ªåˆ†ãŒå¹¸ã›ã«ãªã‚Œã‚‹ã‹åˆ¤æ–­ã§ãã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

### 1.2 ä¸»è¦ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

- **æ¸›ä¾¡å„Ÿå´ç†è«–ã®æ—¥å¸¸å¿œç”¨**: è³¼å…¥ä¾¡æ ¼ã‚’ä½¿ç”¨æœŸé–“ã§å‰²ã£ã¦æ—¥å‰²ã‚Šã‚³ã‚¹ãƒˆã‚’ç®—å‡º
- **ç§‘å­¦çš„æ ¹æ‹ ã«åŸºã¥ãè³¼è²·åˆ¤æ–­**: å¹¸ç¦åº¦ç ”ç©¶ã«åŸºã¥ã„ãŸãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- **ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³**: ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã¨å‚è€ƒãƒ‡ãƒ¼ã‚¿ã®æä¾›

## 2. æ©Ÿèƒ½è¦ä»¶

### 2.1 ã‚³ã‚¢æ©Ÿèƒ½

#### 2.1.1 æ¸›ä¾¡å„Ÿå´è¨ˆç®—æ©Ÿèƒ½

```yaml
å…¥åŠ›:
  - å•†å“åï¼ˆãƒ†ã‚­ã‚¹ãƒˆã€æœ€å¤§100æ–‡å­—ï¼‰
  - ä¾¡æ ¼ï¼ˆæ•°å€¤ã€0ã€œ10å„„å††ï¼‰
  - äºˆæƒ³ä½¿ç”¨å¹´æ•°ï¼ˆæ•°å€¤ã€0.5ã€œ100å¹´ã€0.5å¹´åˆ»ã¿ï¼‰

å‡¦ç†:
  - æ—¥å‰²ã‚Šã‚³ã‚¹ãƒˆ = ä¾¡æ ¼ Ã· (å¹´æ•° Ã— 365)
  - æœˆå‰²ã‚Šã‚³ã‚¹ãƒˆ = æ—¥å‰²ã‚Šã‚³ã‚¹ãƒˆ Ã— 30
  - å¹´å‰²ã‚Šã‚³ã‚¹ãƒˆ = ä¾¡æ ¼ Ã· å¹´æ•°

å‡ºåŠ›:
  - 1æ—¥ã‚ãŸã‚Šã®ã‚³ã‚¹ãƒˆï¼ˆå††ï¼‰
  - æœˆé¡æ›ç®—ï¼ˆå††ï¼‰
  - å¹´é¡æ›ç®—ï¼ˆå††ï¼‰
  - ç·ä½¿ç”¨æ—¥æ•°
  - æ¯”è¼ƒæŒ‡æ¨™ï¼ˆã‚³ãƒ¼ãƒ’ãƒ¼ä»£ã€ãƒ©ãƒ³ãƒä»£ãªã©ï¼‰
```

#### 2.1.2 å•†å“ã‚µã‚¸ã‚§ã‚¹ãƒˆæ©Ÿèƒ½

- å•†å“åå…¥åŠ›æ™‚ã«å‚è€ƒãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å€™è£œã‚’è¡¨ç¤º
- é¸æŠã™ã‚‹ã¨å¹³å‡ä¾¡æ ¼ã¨è€ç”¨å¹´æ•°ã‚’è‡ªå‹•å…¥åŠ›

#### 2.1.3 å‚è€ƒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

```yaml
ã‚«ãƒ†ã‚´ãƒª:
  - å®¶é›»
  - ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³
  - å®¶å…·
  - ã‚¬ã‚¸ã‚§ãƒƒãƒˆ
  - ã‚¹ãƒãƒ¼ãƒ„
  - è¶£å‘³

ãƒ‡ãƒ¼ã‚¿æ§‹é€ :
  name: string # å•†å“å
  price: number # å¹³å‡ä¾¡æ ¼
  years: number # å¹³å‡è€ç”¨å¹´æ•°
  category: string # ã‚«ãƒ†ã‚´ãƒª
  icon: string # è¡¨ç¤ºã‚¢ã‚¤ã‚³ãƒ³
```

#### 2.1.4 å¹¸ç¦åº¦è¨ºæ–­æ©Ÿèƒ½

```yaml
ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆé …ç›®:
  - æ¯æ—¥ã¾ãŸã¯é€±ã«æ•°å›ã¯ä½¿ç”¨ã™ã‚‹äºˆå®š
  - é•·æœŸçš„ã«ä¾¡å€¤ãŒæŒç¶šã™ã‚‹ï¼ˆæµè¡Œã«å·¦å³ã•ã‚Œãªã„ï¼‰
  - ç”Ÿæ´»ã®è³ªã‚„åŠ¹ç‡ãŒæ˜ç¢ºã«å‘ä¸Šã™ã‚‹
  - åŒç­‰ã®ä»£æ›¿å“ã‚„ãƒ¬ãƒ³ã‚¿ãƒ«ã§ã¯æº€è¶³ã§ããªã„
  - ç¶­æŒè²»ãŒåå…¥ã®5%ä»¥ä¸‹ã§ã‚ã‚‹
  - è³¼å…¥å¾Œ1ãƒ¶æœˆçµŒã£ã¦ã‚‚æ¬²ã—ã„ã¨æ€ã£ã¦ã„ã‚‹
  - ä½“é¨“ã‚„æ€ã„å‡ºä½œã‚Šã«å¯„ä¸ã™ã‚‹
  - å¥åº·ã‚„å­¦ç¿’ãªã©è‡ªå·±æŠ•è³‡ã«ãªã‚‹

ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°:
  70%ä»¥ä¸Š: è³¼å…¥ã™ã‚‹ä¾¡å€¤ãŒé«˜ã„
  40-69%: ã‚‚ã†å°‘ã—æ¤œè¨ãŒå¿…è¦
  40%æœªæº€: å†è€ƒã‚’æ¨å¥¨
```

#### 2.1.5 ãƒ‡ãƒ¼ã‚¿åé›†ãƒ»ãƒˆãƒ¬ãƒ³ãƒ‰æ©Ÿèƒ½

- åŒ¿åã§æ¤œç´¢ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ï¼ˆå•†å“åã€ä¾¡æ ¼å¸¯ã€è€ç”¨å¹´æ•°ï¼‰
- äººæ°—å•†å“ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤ºï¼ˆä¸Šä½5-10ä»¶ï¼‰
- ã‚ˆãèª¿ã¹ã‚‰ã‚Œã¦ã„ã‚‹å•†å“ã®è¡¨ç¤º

### 2.2 ç§‘å­¦çš„æ ¹æ‹ Tips

```yaml
æ²è¼‰ã™ã‚‹ç ”ç©¶ãƒ™ãƒ¼ã‚¹ã®Tips:
  - çµŒé¨“vsç‰©è³ª: çµŒé¨“ã¸ã®æŠ•è³‡ã®æ–¹ãŒé•·æœŸçš„å¹¸ç¦åº¦å‘ä¸Šï¼ˆGilovich & Kumar, 2015ï¼‰
  - é©å¿œã®æ³•å‰‡: é«˜ä¾¡ãªè²·ã„ç‰©ã®å¹¸ç¦æ„Ÿã¯3-6ãƒ¶æœˆã§å…ƒã«æˆ»ã‚‹ï¼ˆKahneman & Deaton, 2010ï¼‰
  - æ™‚é–“ã‚’è²·ã†: æ™‚é–“ç¯€ç´„å•†å“ãŒæœ€ã‚‚åŠ¹ç‡çš„ã«å¹¸ç¦åº¦å‘ä¸Šï¼ˆWhillans et al., 2017ï¼‰
  - æ¯”è¼ƒã®ç½ : ä»–äººã¨ã®æ¯”è¼ƒã§ã®è³¼å…¥ã¯æº€è¶³åº¦ä½ä¸‹ï¼ˆSolnick & Hemenway, 1998ï¼‰
  - é…å»¶æº€è¶³: 30æ—¥ãƒ«ãƒ¼ãƒ«ã§è¡å‹•è²·ã„ã®70%ã‚’é˜²æ­¢ï¼ˆAriely & Wertenbroch, 2002ï¼‰
  - 80/20ãƒ«ãƒ¼ãƒ«: å¤šæ©Ÿèƒ½è£½å“ã®å®Ÿä½¿ç”¨æ©Ÿèƒ½ã¯20%ç¨‹åº¦ï¼ˆNielsen Norman Group, 2020ï¼‰
```

## 3. éæ©Ÿèƒ½è¦ä»¶

### 3.1 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

```yaml
åˆå›ãƒ­ãƒ¼ãƒ‰: 3ç§’ä»¥å†…
è¨ˆç®—çµæœè¡¨ç¤º: å³åº§ï¼ˆ< 100msï¼‰
Lighthouse Score:
  Performance: 90ä»¥ä¸Š
  Accessibility: 100
  Best Practices: 90ä»¥ä¸Š
  SEO: 90ä»¥ä¸Š
```

### 3.2 ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¦ä»¶

```yaml
æº–æ‹ åŸºæº–: WCAG 2.1 Level AA
å¿…é ˆè¦ä»¶:
  - ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã®ã¿ã§å…¨æ©Ÿèƒ½æ“ä½œå¯èƒ½
  - ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å®Œå…¨å¯¾å¿œ
  - é©åˆ‡ãªARIAãƒ©ãƒ™ãƒ«
  - ååˆ†ãªã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”
  - ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†
  - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ˜ç¢ºãªè¡¨ç¤º
```

### 3.3 å¯¾å¿œç’°å¢ƒ

```yaml
ãƒ–ãƒ©ã‚¦ã‚¶:
  - Chrome/Edge: æœ€æ–°2ãƒãƒ¼ã‚¸ãƒ§ãƒ³
  - Firefox: æœ€æ–°2ãƒãƒ¼ã‚¸ãƒ§ãƒ³
  - Safari: æœ€æ–°2ãƒãƒ¼ã‚¸ãƒ§ãƒ³

ãƒ‡ãƒã‚¤ã‚¹:
  - ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—: 1024pxä»¥ä¸Š
  - ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ: 768px-1023px
  - ãƒ¢ãƒã‚¤ãƒ«: 767pxä»¥ä¸‹
```

## 4. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 4.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

```yaml
ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯:
  name: Nuxt 3
  version: æœ€æ–°å®‰å®šç‰ˆ
  mode: SSGï¼ˆé™çš„ã‚µã‚¤ãƒˆç”Ÿæˆï¼‰

è¨€èª:
  TypeScript:
    strict: true

UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª:
  name: Volt (PrimeVue + Tailwind)
  ç†ç”±:
    - Code Ownershipãƒ¢ãƒ‡ãƒ«ã§å®Œå…¨åˆ¶å¾¡å¯èƒ½
    - WCAG AAæº–æ‹ ã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£
    - PrimeVueã®è±Šå¯Œãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

CSS:
  name: Tailwind CSS v4
  config: CSS-firstã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

çŠ¶æ…‹ç®¡ç†:
  name: Pinia

ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³:
  name: Valibot
  ç†ç”±:
    - æ¥µå°ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºï¼ˆZodã®10%ï¼‰
    - TypeScriptå®Œå…¨ã‚µãƒãƒ¼ãƒˆ
    - ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆ
```

### 4.2 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ãƒ‡ãƒ¼ã‚¿

```yaml
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹:
  name: Supabase
  features:
    - PostgreSQL
    - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
    - åŒ¿åèªè¨¼ï¼ˆãƒ‡ãƒ¼ã‚¿åé›†ç”¨ï¼‰

åˆ†æ:
  - Supabase Analytics
  - ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
```

### 4.3 é–‹ç™ºç’°å¢ƒ

```yaml
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£: pnpm
Node.js: v20 LTSï¼ˆVoltaã§ç®¡ç†ï¼‰

ãƒ†ã‚¹ãƒˆ:
  å˜ä½“ãƒ†ã‚¹ãƒˆ: Vitest
  UIãƒ†ã‚¹ãƒˆ: @testing-library/vue
  E2E: Playwright
  ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™: 80%ä»¥ä¸Š

ã‚³ãƒ¼ãƒ‰å“è³ª:
  Linter: ESLint + @antfu/eslint-config
  Formatter: Prettier
  å‹ãƒã‚§ãƒƒã‚¯: TypeScript strict mode

Git:
  Hooks: Husky + lint-staged
  ã‚³ãƒŸãƒƒãƒˆè¦ç´„: Conventional Commits

CI/CD:
  platform: GitHub Actions
  ãƒ‡ãƒ—ãƒ­ã‚¤: Vercelï¼ˆç„¡æ–™æ ï¼‰
```

## 5. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### 5.1 Clean Architecture + Feature Slicing

```
src/
â”œâ”€â”€ core/                          # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤
â”‚   â”œâ”€â”€ domain/                    # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”‚   â”œâ”€â”€ Product.ts        # å•†å“ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”‚   â”‚   â”œâ”€â”€ Calculation.ts    # è¨ˆç®—çµæœã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”‚   â”‚   â””â”€â”€ HappinessScore.ts # å¹¸ç¦åº¦ã‚¹ã‚³ã‚¢ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ valueObjects/
â”‚   â”‚   â”‚   â”œâ”€â”€ Money.ts          # é‡‘é¡å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ Years.ts          # å¹´æ•°å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ DailyCost.ts      # æ—¥å‰²ã‚Šã‚³ã‚¹ãƒˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚       â””â”€â”€ index.ts           # å…±é€šå‹å®šç¾©
â”‚   â”‚
â”‚   â”œâ”€â”€ usecases/                  # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ calculation/
â”‚   â”‚   â”‚   â”œâ”€â”€ CalculateDailyCost.ts
â”‚   â”‚   â”‚   â””â”€â”€ CompareWithReference.ts
â”‚   â”‚   â”œâ”€â”€ happiness/
â”‚   â”‚   â”‚   â””â”€â”€ EvaluateHappinessScore.ts
â”‚   â”‚   â””â”€â”€ analytics/
â”‚   â”‚       â””â”€â”€ TrackProductSearch.ts
â”‚   â”‚
â”‚   â””â”€â”€ ports/                     # ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©
â”‚       â”œâ”€â”€ ProductRepository.ts
â”‚       â”œâ”€â”€ AnalyticsService.ts
â”‚       â””â”€â”€ TrendsRepository.ts
â”‚
â”œâ”€â”€ infrastructure/                 # å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹å±¤
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ supabase/
â”‚   â”‚       â”œâ”€â”€ client.ts          # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚       â””â”€â”€ types.ts           # Supabaseå‹å®šç¾©
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”œâ”€â”€ ProductRepositoryImpl.ts
â”‚   â”‚   â””â”€â”€ TrendsRepositoryImpl.ts
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ AnalyticsServiceImpl.ts
â”‚
â”œâ”€â”€ presentation/                   # ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ volt/                  # Voltã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆã‚³ãƒ”ãƒ¼ï¼†ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ VButton.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ VInput.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ VSelect.vue
â”‚   â”‚   â”‚   â””â”€â”€ VCheckbox.vue
â”‚   â”‚   â”œâ”€â”€ calculator/
â”‚   â”‚   â”‚   â”œâ”€â”€ CalculatorForm.vue
â”‚   â”‚   â”‚   â””â”€â”€ ResultDisplay.vue
â”‚   â”‚   â”œâ”€â”€ reference/
â”‚   â”‚   â”‚   â”œâ”€â”€ CategoryTabs.vue
â”‚   â”‚   â”‚   â””â”€â”€ ProductCard.vue
â”‚   â”‚   â””â”€â”€ happiness/
â”‚   â”‚       â”œâ”€â”€ HappinessChecklist.vue
â”‚   â”‚       â””â”€â”€ ScoreDisplay.vue
â”‚   â”‚
â”‚   â”œâ”€â”€ composables/               # Vue Composables
â”‚   â”‚   â”œâ”€â”€ useCalculation.ts
â”‚   â”‚   â”œâ”€â”€ useValidation.ts      # Valibotçµ±åˆ
â”‚   â”‚   â””â”€â”€ useAnalytics.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â””â”€â”€ index.vue              # ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
â”‚   â”‚
â”‚   â””â”€â”€ layouts/
â”‚       â””â”€â”€ default.vue            # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚
â”œâ”€â”€ shared/                         # å…±é€šæ©Ÿèƒ½
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ formatters.ts         # æ•°å€¤ãƒ»æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
â”‚   â”‚   â””â”€â”€ validators.ts         # Valibotã‚¹ã‚­ãƒ¼ãƒå®šç¾©
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”œâ”€â”€ categories.ts         # ã‚«ãƒ†ã‚´ãƒªå®šæ•°
â”‚   â”‚   â””â”€â”€ referenceData.ts      # å‚è€ƒãƒ‡ãƒ¼ã‚¿
â”‚   â””â”€â”€ i18n/
â”‚       â”œâ”€â”€ ja.json                # æ—¥æœ¬èª
â”‚       â””â”€â”€ en.json                # è‹±èª
â”‚
â””â”€â”€ tests/                          # ãƒ†ã‚¹ãƒˆ
    â”œâ”€â”€ unit/                       # å˜ä½“ãƒ†ã‚¹ãƒˆ
    â”‚   â”œâ”€â”€ core/
    â”‚   â””â”€â”€ shared/
    â”œâ”€â”€ integration/                # çµ±åˆãƒ†ã‚¹ãƒˆ
    â””â”€â”€ e2e/                       # E2Eãƒ†ã‚¹ãƒˆ
        â””â”€â”€ calculator.spec.ts
```

### 5.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```mermaid
graph LR
    UI[UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ] --> UC[ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹]
    UC --> Domain[ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«]
    UC --> Port[ãƒãƒ¼ãƒˆ]
    Port --> Infra[ã‚¤ãƒ³ãƒ•ãƒ©å®Ÿè£…]
    Infra --> External[å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹]
```

## 6. é–‹ç™ºæ–¹é‡

### 6.1 TDDï¼ˆãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼‰

#### å®Ÿè·µæ–¹æ³•

```yaml
ã‚µã‚¤ã‚¯ãƒ«:
  1. Red: ãƒ†ã‚¹ãƒˆã‚’æ›¸ãï¼ˆå¤±æ•—ï¼‰
  2. Green: æœ€å°é™ã®å®Ÿè£…ï¼ˆæˆåŠŸï¼‰
  3. Refactor: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

ãƒ†ã‚¹ãƒˆæˆ¦ç•¥:
  - ä»®å®Ÿè£…ã‹ã‚‰å§‹ã‚ã‚‹
  - ä¸‰è§’æ¸¬é‡ã§ä¸€èˆ¬åŒ–
  - æ˜ç™½ãªå®Ÿè£…ã¯ç›´æ¥è¨˜è¿°

å‘½åè¦ç´„:
  describe: "è¨ˆç®—æ©Ÿèƒ½"ã®ã‚ˆã†ãªæ©Ÿèƒ½å
  it: "ã€œã™ã‚‹"ã¨ã„ã†å‹•ä½œã‚’è¨˜è¿°

ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™:
  å˜ä½“ãƒ†ã‚¹ãƒˆ: 90%ä»¥ä¸Š
  çµ±åˆãƒ†ã‚¹ãƒˆ: 70%ä»¥ä¸Š
  E2E: ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹ã®ã¿
```

#### ãƒ†ã‚¹ãƒˆä¾‹

```typescript
// core/usecases/calculation/CalculateDailyCost.spec.ts
describe('CalculateDailyCost', () => {
  describe('execute', () => {
    it('è³¼å…¥ä¾¡æ ¼ã¨ä½¿ç”¨å¹´æ•°ã‹ã‚‰æ—¥å‰²ã‚Šã‚³ã‚¹ãƒˆã‚’è¨ˆç®—ã™ã‚‹', () => {
      // Arrange
      const useCase = new CalculateDailyCost()
      const input = {
        price: Money.of(150000),
        years: Years.of(5)
      }

      // Act
      const result = useCase.execute(input)

      // Assert
      expect(result.dailyCost.value).toBe(82)
      expect(result.monthlyCost.value).toBe(2460)
      expect(result.yearlyCost.value).toBe(30000)
    })

    it('0å¹´ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™', () => {
      // Arrange
      const useCase = new CalculateDailyCost()
      const input = {
        price: Money.of(150000),
        years: Years.of(0)
      }

      // Act & Assert
      expect(() => useCase.execute(input)).toThrow('ä½¿ç”¨å¹´æ•°ã¯0ã‚ˆã‚Šå¤§ãã„å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„')
    })
  })
})
```

### 6.2 ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…ï¼ˆValibotï¼‰

```typescript
// shared/utils/validators.ts
import * as v from 'valibot'

// å•†å“å…¥åŠ›ã‚¹ã‚­ãƒ¼ãƒ
export const ProductInputSchema = v.object({
  name: v.pipe(
    v.string(),
    v.minLength(1, 'å•†å“åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),
    v.maxLength(100, 'å•†å“åã¯100æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„')
  ),
  price: v.pipe(
    v.number(),
    v.minValue(1, 'ä¾¡æ ¼ã¯1å††ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
    v.maxValue(1000000000, 'ä¾¡æ ¼ã¯10å„„å††ä»¥ä¸‹ã§å…¥åŠ›ã—ã¦ãã ã•ã„')
  ),
  years: v.pipe(
    v.number(),
    v.minValue(0.5, 'ä½¿ç”¨å¹´æ•°ã¯0.5å¹´ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
    v.maxValue(100, 'ä½¿ç”¨å¹´æ•°ã¯100å¹´ä»¥ä¸‹ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
    v.multipleOf(0.5, 'ä½¿ç”¨å¹´æ•°ã¯0.5å¹´å˜ä½ã§å…¥åŠ›ã—ã¦ãã ã•ã„')
  )
})

// å‹æ¨è«–
export type ProductInput = v.InferInput<typeof ProductInputSchema>
```

### 6.3 Voltã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

```vue
<!-- components/volt/VInput.vue -->
<script setup lang="ts">
import PrimeInputText from 'primevue/inputtext'
import { useId } from 'vue'

defineProps<{
  label?: string
  required?: boolean
  error?: string
  modelValue?: string | number
}>()

const inputId = useId()
const errorId = useId()
</script>

<template>
  <div class="v-input">
    <label
      v-if="label"
      :for="inputId"
      class="block text-sm font-medium text-gray-700 mb-1"
    >
      {{ label }}
      <span v-if="required" class="text-red-500 ml-1">*</span>
    </label>

    <PrimeInputText
      :id="inputId"
      v-model="modelValue"
      :unstyled="true"
      :invalid="!!error"
      :aria-describedby="errorId"
      :aria-invalid="!!error"
      :pt="{
        root: [
          'w-full px-3 py-2 border rounded-md',
          'focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
          'transition-colors duration-200',
          error ? 'border-red-500' : 'border-gray-300',
        ].join(' '),
      }"
      v-bind="$attrs"
    />

    <p
      v-if="error"
      :id="errorId"
      class="mt-1 text-sm text-red-600"
      role="alert"
    >
      {{ error }}
    </p>
  </div>
</template>
```

## 7. å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆWeek 1ï¼‰

```yaml
ã‚¿ã‚¹ã‚¯:
  - Nuxt 3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
  - Voltå°å…¥ã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
  - TDDç’°å¢ƒæ§‹ç¯‰ï¼ˆVitestè¨­å®šï¼‰
  - ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®åŸºæœ¬æ§‹é€ ä½œæˆ
  - åŸºæœ¬çš„ãªãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«å®Ÿè£…ï¼ˆTDDï¼‰

æˆæœç‰©:
  - å‹•ä½œã™ã‚‹é–‹ç™ºç’°å¢ƒ
  - åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆãŒé€šã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«
  - Voltã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚µãƒ³ãƒ—ãƒ«å®Ÿè£…
```

### Phase 2: ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…ï¼ˆWeek 2-3ï¼‰

```yaml
ã‚¿ã‚¹ã‚¯:
  - è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…ï¼ˆTDDï¼‰
  - è¨ˆç®—ãƒ•ã‚©ãƒ¼ãƒ UIå®Ÿè£…
  - çµæœè¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…ï¼ˆValibotï¼‰
  - å‚è€ƒãƒ‡ãƒ¼ã‚¿ã®é™çš„å®Ÿè£…

æˆæœç‰©:
  - è¨ˆç®—æ©Ÿèƒ½ãŒå‹•ä½œã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
  - å˜ä½“ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Š
  - ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£åŸºæº–ã‚’æº€ãŸã™UI
```

### Phase 3: ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ï¼ˆWeek 4ï¼‰

```yaml
ã‚¿ã‚¹ã‚¯:
  - Supabaseç’°å¢ƒæ§‹ç¯‰
  - ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆãƒ»å®Ÿè£…
  - ãƒªãƒã‚¸ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè£…
  - ãƒˆãƒ¬ãƒ³ãƒ‰é›†è¨ˆæ©Ÿèƒ½

æˆæœç‰©:
  - ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–æ©Ÿèƒ½
  - ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º
  - åŒ¿åãƒ‡ãƒ¼ã‚¿åé›†
```

### Phase 4: æ‹¡å¼µæ©Ÿèƒ½ï¼ˆWeek 5ï¼‰

```yaml
ã‚¿ã‚¹ã‚¯:
  - å¹¸ç¦åº¦è¨ºæ–­æ©Ÿèƒ½
  - ç§‘å­¦çš„æ ¹æ‹ Tipsã‚»ã‚¯ã‚·ãƒ§ãƒ³
  - i18nå¯¾å¿œï¼ˆæ—¥è‹±ï¼‰
  - PWAå¯¾å¿œ

æˆæœç‰©:
  - å…¨æ©Ÿèƒ½å®Ÿè£…å®Œäº†
  - å¤šè¨€èªå¯¾å¿œ
  - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
```

### Phase 5: æœ€é©åŒ–ãƒ»å…¬é–‹ï¼ˆWeek 6ï¼‰

```yaml
ã‚¿ã‚¹ã‚¯:
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
  - ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ç›£æŸ»
  - E2Eãƒ†ã‚¹ãƒˆå®Ÿè£…
  - ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š

æˆæœç‰©:
  - Lighthouse Score 90+
  - WCAG AAæº–æ‹ ç¢ºèª
  - æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤
```

## 8. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```typescript
// shared/utils/errors.ts
export class DomainError extends Error {
  constructor(message: string, public code: string) {
    super(message)
    this.name = 'DomainError'
  }
}

export class ValidationError extends DomainError {
  constructor(message: string, public field?: string) {
    super(message, 'VALIDATION_ERROR')
  }
}

export class CalculationError extends DomainError {
  constructor(message: string) {
    super(message, 'CALCULATION_ERROR')
  }
}

// ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
export function setupErrorHandling() {
  window.addEventListener('unhandledrejection', (event) => {
    console.error('Unhandled promise rejection:', event.reason)
    // Sentryã«é€ä¿¡ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
  })
}
```

## 9. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

```yaml
XSSå¯¾ç­–:
  - Vue3ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ã‚¹ã‚±ãƒ¼ãƒ—æ©Ÿèƒ½ã‚’æ´»ç”¨
  - v-htmlã¯ä½¿ç”¨ç¦æ­¢
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã¯å¿…ãšãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

CSPè¨­å®š:
  - Content-Security-Policy ãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š
  - ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆç¦æ­¢
  - å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹ã¯ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆåˆ¶

ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼:
  - å€‹äººæƒ…å ±ã¯åé›†ã—ãªã„
  - åŒ¿åãƒ‡ãƒ¼ã‚¿ã®ã¿åé›†
  - GDPR/å€‹äººæƒ…å ±ä¿è­·æ³•æº–æ‹ 
```

## 10. ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š

```yaml
# vercel.json
buildCommand: pnpm run build
outputDirectory: .output/public
framework: nuxt
rewrites:
  - source: '/(.*)'
    destination: /index.html

headers:
  - source: '/(.*)'
    headers:
      - key: X-Content-Type-Options
        value: nosniff

      - key: X-Frame-Options
        value: SAMEORIGIN

      - key: X-XSS-Protection
        value: 1; mode=block
```

## 11. å‚è€ƒãƒ‡ãƒ¼ã‚¿ï¼ˆåˆæœŸå®Ÿè£…ç”¨ï¼‰

```typescript
// shared/constants/referenceData.ts
export const REFERENCE_DATA = [
  // å®¶é›»
  { name: 'ãƒãƒ¼ãƒˆãƒ‘ã‚½ã‚³ãƒ³', price: 150000, years: 5, category: 'å®¶é›»', icon: 'ğŸ’»' },
  { name: 'ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³', price: 100000, years: 3, category: 'å®¶é›»', icon: 'ğŸ“±' },
  { name: 'å†·è”µåº«', price: 200000, years: 15, category: 'å®¶é›»', icon: 'ğŸ§Š' },
  { name: 'æ´—æ¿¯æ©Ÿ', price: 100000, years: 10, category: 'å®¶é›»', icon: 'ğŸŒ€' },
  { name: 'ã‚¨ã‚¢ã‚³ãƒ³', price: 150000, years: 13, category: 'å®¶é›»', icon: 'â„ï¸' },

  // ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³
  { name: 'ãƒ“ã‚¸ãƒã‚¹ã‚¹ãƒ¼ãƒ„', price: 50000, years: 3, category: 'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³', icon: 'ğŸ‘”' },
  { name: 'ã‚³ãƒ¼ãƒˆ', price: 30000, years: 5, category: 'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³', icon: 'ğŸ§¥' },
  { name: 'ã‚¹ãƒ‹ãƒ¼ã‚«ãƒ¼', price: 15000, years: 2, category: 'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³', icon: 'ğŸ‘Ÿ' },

  // ä»–ã®ã‚«ãƒ†ã‚´ãƒªã‚‚åŒæ§˜ã«è¿½åŠ 
]
```

## 12. é–‹ç™ºé–‹å§‹æ™‚ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

```yaml
ç’°å¢ƒæ§‹ç¯‰:
  â˜ Node.js v20 LTS ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  â˜ pnpm ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  â˜ Voltaã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
  â˜ VSCodeæ‹¡å¼µæ©Ÿèƒ½ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    - Vue Language Features
    - TypeScript Vue Plugin
    - ESLint
    - Prettier
    - Vitest

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–:
  â˜ Nuxt 3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
  â˜ TypeScript strict modeè¨­å®š
  â˜ Voltå°å…¥
  â˜ Tailwind CSS v4è¨­å®š
  â˜ Valibot ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  â˜ Vitestè¨­å®š
  â˜ ESLint/Prettierè¨­å®š
  â˜ Husky/lint-stagedè¨­å®š

åˆå›ã‚³ãƒŸãƒƒãƒˆ:
  â˜ .gitignoreè¨­å®š
  â˜ README.mdä½œæˆ
  â˜ Conventional Commitsè¨­å®š
  â˜ åˆå›ã‚³ãƒŸãƒƒãƒˆï¼ˆfeat: initial setupï¼‰
```

## 13. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œæˆ¦ç•¥

### 13.1 æ©Ÿèƒ½åˆ¥å¯¾å¿œæ–¹é‡

```yaml
å®Œå…¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼ˆPriority 1ï¼‰:
  æ¸›ä¾¡å„Ÿå´è¨ˆç®—:
    - ã™ã¹ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§å®Ÿè¡Œ
    - å¤–éƒ¨APIä¾å­˜ãªã—
    - ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«å±¥æ­´ä¿å­˜

  å¹¸ç¦åº¦è¨ºæ–­:
    - ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆè©•ä¾¡ãƒ­ã‚¸ãƒƒã‚¯ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…
    - çµæœã®ä¿å­˜ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

  åŸºæœ¬UI/UX:
    - å…¨ç”»é¢é·ç§»ã‚’ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
    - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
    - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³é€šçŸ¥ãƒãƒŠãƒ¼

ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ™‚ã®ã¿ï¼ˆPriority 2ï¼‰:
  ãƒ‡ãƒ¼ã‚¿åé›†:
    - æ¤œç´¢ãƒ‡ãƒ¼ã‚¿ã®é€ä¿¡
    - ä½¿ç”¨çµ±è¨ˆã®è¨˜éŒ²

  ãƒˆãƒ¬ãƒ³ãƒ‰æ©Ÿèƒ½:
    - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ©ãƒ³ã‚­ãƒ³ã‚°
    - äººæ°—å•†å“ã®è¡¨ç¤º

  ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹:
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•åˆ†æ
    - ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°

ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰å¯¾å¿œï¼ˆPriority 3ï¼‰:
  å‚è€ƒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹:
    - äººæ°—å•†å“TOP30ã‚’äº‹å‰ãƒãƒ³ãƒ‰ãƒ«
    - ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ™‚ã«æœ€æ–°ãƒ‡ãƒ¼ã‚¿å–å¾—
    - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹æœŸé™: 7æ—¥é–“

  å•†å“ã‚µã‚¸ã‚§ã‚¹ãƒˆ:
    - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³: ãƒ—ãƒªã‚»ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ææ¡ˆ
    - ã‚ªãƒ³ãƒ©ã‚¤ãƒ³: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚µã‚¸ã‚§ã‚¹ãƒˆ
```

### 13.2 Service Workerå®Ÿè£…æˆ¦ç•¥

```javascript
// sw.js ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
const cacheStrategies = {
  // é™çš„ã‚¢ã‚»ãƒƒãƒˆ - Cache First
  '/assets/*': {
    strategy: 'CacheFirst',
    cacheName: 'static-assets-v1',
    expiration: 30 * 24 * 60 * 60 // 30æ—¥
  },

  // HTMLãƒšãƒ¼ã‚¸ - Network First
  '/*.html': {
    strategy: 'NetworkFirst',
    cacheName: 'pages-v1',
    networkTimeout: 3000
  },

  // ãƒ—ãƒªã‚»ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ - Cache First
  '/data/presets.json': {
    strategy: 'CacheFirst',
    cacheName: 'presets-v1',
    expiration: 7 * 24 * 60 * 60 // 7æ—¥
  },

  // API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  '/api/trends': {
    strategy: 'NetworkOnly' // ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®ã¿
  },
  '/api/analytics': {
    strategy: 'NetworkOnly' // ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®ã¿
  }
}
```

### 13.3 ãƒ—ãƒªã‚»ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿è¨­è¨ˆ

```typescript
// shared/constants/offlinePresets.ts
export const OFFLINE_PRESETS = {
  // äººæ°—å•†å“TOP30
  popular: [
    // ã‚¬ã‚¸ã‚§ãƒƒãƒˆ
    { name: 'iPhone 15 Pro', price: 159800, years: 3, category: 'ã‚¬ã‚¸ã‚§ãƒƒãƒˆ', icon: 'ğŸ“±' },
    { name: 'MacBook Air M3', price: 164800, years: 5, category: 'ã‚¬ã‚¸ã‚§ãƒƒãƒˆ', icon: 'ğŸ’»' },
    { name: 'iPad Pro 12.9', price: 172800, years: 4, category: 'ã‚¬ã‚¸ã‚§ãƒƒãƒˆ', icon: 'ğŸ“±' },
    { name: 'AirPods Pro', price: 39800, years: 3, category: 'ã‚¬ã‚¸ã‚§ãƒƒãƒˆ', icon: 'ğŸ§' },
    { name: 'Apple Watch Series 9', price: 59800, years: 3, category: 'ã‚¬ã‚¸ã‚§ãƒƒãƒˆ', icon: 'âŒš' },

    // å®¶é›»
    { name: 'ãƒ‰ãƒ©ãƒ å¼æ´—æ¿¯æ©Ÿ', price: 250000, years: 10, category: 'å®¶é›»', icon: 'ğŸŒ€' },
    { name: 'å†·è”µåº«ï¼ˆ500Lï¼‰', price: 200000, years: 15, category: 'å®¶é›»', icon: 'ğŸ§Š' },
    { name: 'ã‚¨ã‚¢ã‚³ãƒ³ï¼ˆ14ç•³ç”¨ï¼‰', price: 150000, years: 13, category: 'å®¶é›»', icon: 'â„ï¸' },
    { name: 'ãƒ­ãƒœãƒƒãƒˆæƒé™¤æ©Ÿ', price: 80000, years: 5, category: 'å®¶é›»', icon: 'ğŸ¤–' },
    { name: '4Kæœ‰æ©ŸELãƒ†ãƒ¬ãƒ“', price: 300000, years: 8, category: 'å®¶é›»', icon: 'ğŸ“º' },

    // ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³
    { name: 'ãƒ“ã‚¸ãƒã‚¹ã‚¹ãƒ¼ãƒ„ï¼ˆã‚ªãƒ¼ãƒ€ãƒ¼ï¼‰', price: 80000, years: 3, category: 'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³', icon: 'ğŸ‘”' },
    { name: 'ãƒ–ãƒ©ãƒ³ãƒ‰ãƒãƒƒã‚°', price: 150000, years: 10, category: 'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³', icon: 'ğŸ‘œ' },
    { name: 'ã‚¹ãƒ‹ãƒ¼ã‚«ãƒ¼ï¼ˆé™å®šï¼‰', price: 30000, years: 2, category: 'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³', icon: 'ğŸ‘Ÿ' },
    { name: 'ãƒ€ã‚¦ãƒ³ã‚¸ãƒ£ã‚±ãƒƒãƒˆ', price: 50000, years: 5, category: 'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³', icon: 'ğŸ§¥' },
    { name: 'è…•æ™‚è¨ˆï¼ˆé«˜ç´šï¼‰', price: 500000, years: 20, category: 'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³', icon: 'âŒš' },

    // å®¶å…·
    { name: 'ãƒ¯ãƒ¼ã‚¯ãƒã‚§ã‚¢ï¼ˆé«˜ç´šï¼‰', price: 150000, years: 10, category: 'å®¶å…·', icon: 'ğŸª‘' },
    { name: 'ãƒ€ã‚¤ãƒ‹ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«', price: 100000, years: 15, category: 'å®¶å…·', icon: 'ğŸª‘' },
    { name: 'ã‚½ãƒ•ã‚¡ï¼ˆ3äººæ›ã‘ï¼‰', price: 200000, years: 10, category: 'å®¶å…·', icon: 'ğŸ›‹ï¸' },
    { name: 'ãƒ™ãƒƒãƒ‰ï¼ˆã‚¯ã‚¤ãƒ¼ãƒ³ï¼‰', price: 150000, years: 15, category: 'å®¶å…·', icon: 'ğŸ›ï¸' },
    { name: 'åç´æ£šï¼ˆã‚ªãƒ¼ãƒ€ãƒ¼ï¼‰', price: 80000, years: 20, category: 'å®¶å…·', icon: 'ğŸ“š' },

    // ã‚¹ãƒãƒ¼ãƒ„
    { name: 'ãƒ­ãƒ¼ãƒ‰ãƒã‚¤ã‚¯', price: 300000, years: 10, category: 'ã‚¹ãƒãƒ¼ãƒ„', icon: 'ğŸš´' },
    { name: 'ã‚´ãƒ«ãƒ•ã‚¯ãƒ©ãƒ–ã‚»ãƒƒãƒˆ', price: 200000, years: 10, category: 'ã‚¹ãƒãƒ¼ãƒ„', icon: 'â›³' },
    { name: 'ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚·ãƒ¥ãƒ¼ã‚º', price: 20000, years: 1, category: 'ã‚¹ãƒãƒ¼ãƒ„', icon: 'ğŸ‘Ÿ' },
    { name: 'ã‚¹ã‚­ãƒ¼æ¿ã‚»ãƒƒãƒˆ', price: 150000, years: 8, category: 'ã‚¹ãƒãƒ¼ãƒ„', icon: 'â›·ï¸' },
    { name: 'ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ãƒã‚¤ã‚¯', price: 100000, years: 10, category: 'ã‚¹ãƒãƒ¼ãƒ„', icon: 'ğŸš´' },

    // è¶£å‘³
    { name: 'ãƒ‡ã‚¸ã‚¿ãƒ«ä¸€çœ¼ãƒ¬ãƒ•', price: 300000, years: 7, category: 'è¶£å‘³', icon: 'ğŸ“·' },
    { name: 'ã‚²ãƒ¼ãƒŸãƒ³ã‚°PC', price: 250000, years: 4, category: 'è¶£å‘³', icon: 'ğŸ®' },
    { name: 'ã‚­ãƒ£ãƒ³ãƒ—ç”¨å“ã‚»ãƒƒãƒˆ', price: 100000, years: 10, category: 'è¶£å‘³', icon: 'â›º' },
    { name: 'é›»å­ãƒ”ã‚¢ãƒ', price: 200000, years: 15, category: 'è¶£å‘³', icon: 'ğŸ¹' },
    { name: 'é«˜ç´šä¸‡å¹´ç­†', price: 50000, years: 30, category: 'è¶£å‘³', icon: 'âœ’ï¸' }
  ],

  // ã‚«ãƒ†ã‚´ãƒªåˆ¥é›†è¨ˆ
  categoryStats: {
    å®¶é›»: { count: 10, avgPrice: 192000, avgYears: 9.8 },
    ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³: { count: 10, avgPrice: 102000, avgYears: 8.0 },
    å®¶å…·: { count: 10, avgPrice: 136000, avgYears: 14.0 },
    ã‚¬ã‚¸ã‚§ãƒƒãƒˆ: { count: 10, avgPrice: 115400, avgYears: 3.6 },
    ã‚¹ãƒãƒ¼ãƒ„: { count: 10, avgPrice: 154000, avgYears: 7.8 },
    è¶£å‘³: { count: 10, avgPrice: 180000, avgYears: 14.2 }
  },

  // ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  offlineMessages: {
    trends: 'ç¾åœ¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã®ãŸã‚ã€æœ€æ–°ã®ãƒˆãƒ¬ãƒ³ãƒ‰æƒ…å ±ã¯è¡¨ç¤ºã§ãã¾ã›ã‚“',
    suggestion: 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€ã‚ˆãæ¤œç´¢ã•ã‚Œã‚‹å•†å“ã‹ã‚‰ææ¡ˆã—ã¦ã„ã¾ã™',
    sync: 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã«ãªã£ãŸã‚‰æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã«æ›´æ–°ã•ã‚Œã¾ã™'
  }
}
```

### 13.4 ã‚ªãƒ•ãƒ©ã‚¤ãƒ³é€šçŸ¥UI

```vue
<!-- components/common/OfflineNotice.vue -->
<template>
  <Transition name="slide">
    <div
      v-if="isOffline"
      class="fixed top-0 left-0 right-0 bg-yellow-500 text-white px-4 py-2 z-50"
      role="alert"
      aria-live="polite"
    >
      <div class="container mx-auto flex items-center justify-between">
        <span class="flex items-center gap-2">
          <Icon name="wifi-off" />
          ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œä¸­ - ä¸€éƒ¨æ©Ÿèƒ½ãŒåˆ¶é™ã•ã‚Œã¦ã„ã¾ã™
        </span>
        <button
          class="text-white/80 hover:text-white"
          aria-label="é€šçŸ¥ã‚’é–‰ã˜ã‚‹"
          @click="dismiss"
        >
          <Icon name="x" />
        </button>
      </div>
    </div>
  </Transition>
</template>
```

## 14. æ³•çš„ãƒ»ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è¦ä»¶

### 14.1 å¿…é ˆæ³•çš„æ–‡æ›¸

```yaml
åˆ©ç”¨è¦ç´„:
  è¨˜è¼‰äº‹é …:
    - ã‚µãƒ¼ãƒ“ã‚¹ã®æ¦‚è¦ã¨ç›®çš„
    - åˆ©ç”¨è€…ã®å®šç¾©
    - ç¦æ­¢äº‹é …
    - å…è²¬äº‹é …ï¼ˆé‡è¦ï¼‰
    - çŸ¥çš„è²¡ç”£æ¨©
    - æº–æ‹ æ³•ã¨ç®¡è½„

  å…è²¬æ¡é …ï¼ˆå¿…é ˆï¼‰:
    - æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®è¨ˆç®—çµæœã¯å‚è€ƒå€¤ã§ã™
    - è³¼å…¥åˆ¤æ–­ã¯è‡ªå·±è²¬ä»»ã§è¡Œã£ã¦ãã ã•ã„
    - è¨ˆç®—çµæœã«ã‚ˆã‚‹æå®³ã®è²¬ä»»ã¯è² ã„ã¾ã›ã‚“

ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼:
  è¨˜è¼‰äº‹é …:
    - åé›†ã™ã‚‹æƒ…å ±ï¼ˆåŒ¿åãƒ‡ãƒ¼ã‚¿ã®ã¿ï¼‰
    - æƒ…å ±ã®åˆ©ç”¨ç›®çš„
    - ç¬¬ä¸‰è€…æä¾›ã®æœ‰ç„¡
    - Cookieã®ä½¿ç”¨
    - å•ã„åˆã‚ã›å…ˆ

  GDPRå¯¾å¿œ:
    - ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£
    - å‰Šé™¤è¦æ±‚ã¸ã®å¯¾å¿œ
    - åŒæ„ã®å–å¾—ã¨è¨˜éŒ²

CookieåŒæ„:
  å®Ÿè£…è¦ä»¶:
    - åˆå›è¨ªå•æ™‚ã«è¡¨ç¤º
    - å¿…é ˆ/ä»»æ„Cookie ã®åŒºåˆ¥
    - åŒæ„ã®è¨˜éŒ²ï¼ˆlocalStorageï¼‰
    - æ‹’å¦å¯èƒ½ãªè¨­è¨ˆ
```

### 14.2 æ³•çš„æ–‡æ›¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```markdown
<!-- pages/terms.vue -->

# åˆ©ç”¨è¦ç´„

æœ€çµ‚æ›´æ–°æ—¥: 2024å¹´XXæœˆXXæ—¥

## 1. ã¯ã˜ã‚ã«

ã€Œã«ã¡ã‚ã‚Šï¼ã€ï¼ˆä»¥ä¸‹ã€ã€Œæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã€ï¼‰ã¯ã€å•†å“ã®æ¸›ä¾¡å„Ÿå´è¨ˆç®—ã‚’é€šã˜ã¦
è³¢ã„è³¼è²·åˆ¤æ–­ã‚’æ”¯æ´ã™ã‚‹ç„¡æ–™ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

## 2. å…è²¬äº‹é …

**é‡è¦: æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã§æä¾›ã•ã‚Œã‚‹è¨ˆç®—çµæœã¯ã™ã¹ã¦å‚è€ƒå€¤ã§ã™ã€‚**

- å®Ÿéš›ã®å•†å“å¯¿å‘½ã¯ä½¿ç”¨çŠ¶æ³ã«ã‚ˆã‚Šå¤§ããç•°ãªã‚Šã¾ã™
- è¨ˆç®—çµæœã‚’åŸºã«ã—ãŸè³¼è²·åˆ¤æ–­ã¯è‡ªå·±è²¬ä»»ã§è¡Œã£ã¦ãã ã•ã„
- æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã«ã‚ˆã‚Šç”Ÿã˜ãŸæå®³ã«ã¤ã„ã¦ä¸€åˆ‡è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“

## 3. çŸ¥çš„è²¡ç”£æ¨©

æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€ãƒ­ã‚´ã€ãƒ‡ã‚¶ã‚¤ãƒ³ã¯å½“æ–¹ã«å¸°å±ã—ã¾ã™ã€‚

## 4. æº–æ‹ æ³•

æœ¬è¦ç´„ã¯æ—¥æœ¬æ³•ã«æº–æ‹ ã—ã€ç´›äº‰ãŒç”Ÿã˜ãŸå ´åˆã¯æ±äº¬åœ°æ–¹è£åˆ¤æ‰€ã‚’ç®¡è½„ã¨ã—ã¾ã™ã€‚
```

## 15. ç’°å¢ƒå¤‰æ•°ç®¡ç†

### 15.1 ç’°å¢ƒå¤‰æ•°è¨­å®š

```bash
# .env.example
# Supabaseè¨­å®š
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-key # ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã®ã¿ã€æœ¬ç•ªã§ã¯è¨­å®šã—ãªã„

# ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹
GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ç’°å¢ƒè¨­å®š
NODE_ENV=development # development | production
APP_ENV=local # local | staging | production

# æ©Ÿèƒ½ãƒ•ãƒ©ã‚°
ENABLE_ANALYTICS=false # é–‹ç™ºç’°å¢ƒã§ã¯false
ENABLE_PWA=true
ENABLE_OFFLINE_MODE=true

# APIè¨­å®š
API_TIMEOUT=5000
MAX_RETRY_COUNT=3
```

### 15.2 ç’°å¢ƒåˆ¥è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

```typescript
// config/env.ts
export const config = {
  supabase: {
    url: process.env.SUPABASE_URL!,
    anonKey: process.env.SUPABASE_ANON_KEY!,
    // Service Keyã¯é–‹ç™ºç’°å¢ƒã®ã¿
    serviceKey: process.env.NODE_ENV === 'development'
      ? process.env.SUPABASE_SERVICE_KEY
      : undefined
  },

  features: {
    analytics: process.env.ENABLE_ANALYTICS === 'true',
    pwa: process.env.ENABLE_PWA === 'true',
    offlineMode: process.env.ENABLE_OFFLINE_MODE === 'true'
  },

  api: {
    timeout: Number.parseInt(process.env.API_TIMEOUT || '5000'),
    maxRetry: Number.parseInt(process.env.MAX_RETRY_COUNT || '3')
  }
}
```

## 16. Supabaseåˆ¶é™äº‹é …ã¨å¯¾ç­–

### 16.1 ç„¡æ–™æ åˆ¶é™

```yaml
åˆ¶é™äº‹é …:
  APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
    åˆ¶é™: 500,000å›/æœˆ
    å¯¾ç­–:
      - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥
      - ãƒãƒƒãƒå‡¦ç†ã®å®Ÿè£…
      - ä¸è¦ãªAPIã‚³ãƒ¼ãƒ«ã®å‰Šæ¸›

  ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹:
    å®¹é‡: 500MB
    åŒæ™‚æ¥ç¶š: 60
    å¯¾ç­–:
      - å¤ã„ãƒ‡ãƒ¼ã‚¿ã®å®šæœŸå‰Šé™¤
      - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–
      - ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ¼ãƒªãƒ³ã‚°

  ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸:
    å®¹é‡: 1GB
    å¸¯åŸŸ: 2GB/æœˆ
    å¯¾ç­–:
      - ç”»åƒã¯å¤–éƒ¨CDNåˆ©ç”¨
      - ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™

  èªè¨¼:
    MAU: 50,000
    å¯¾ç­–:
      - åŒ¿åèªè¨¼ã®æ´»ç”¨
      - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®æœ€é©åŒ–
```

### 16.2 ãƒ¬ãƒ¼ãƒˆåˆ¶é™å®Ÿè£…

```typescript
// utils/rateLimiter.ts
export class RateLimiter {
  private requests: Map<string, number[]> = new Map()

  constructor(
    private maxRequests: number = 10,
    private windowMs: number = 60000 // 1åˆ†
  ) {}

  async throttle(key: string): Promise<boolean> {
    const now = Date.now()
    const requests = this.requests.get(key) || []

    // å¤ã„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‰Šé™¤
    const validRequests = requests.filter(
      time => now - time < this.windowMs
    )

    if (validRequests.length >= this.maxRequests) {
      return false // ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«é”ã—ãŸ
    }

    validRequests.push(now)
    this.requests.set(key, validRequests)
    return true
  }
}
```

### 16.3 ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°è¨­å®š

```typescript
// services/monitoring.ts
export class SupabaseMonitor {
  private usageData = {
    apiCalls: 0,
    dbSize: 0,
    storageUsed: 0
  }

  async checkUsage() {
    // ä½¿ç”¨é‡ã‚’ãƒã‚§ãƒƒã‚¯
    const usage = await this.getSupabaseUsage()

    // é–¾å€¤ãƒã‚§ãƒƒã‚¯ï¼ˆ80%ã§è­¦å‘Šï¼‰
    if (usage.apiCalls > 400000) {
      this.sendAlert('APIä½¿ç”¨é‡ãŒ80%ã‚’è¶…ãˆã¾ã—ãŸ')
    }

    if (usage.dbSize > 400) { // 400MB
      this.sendAlert('DBå®¹é‡ãŒ80%ã‚’è¶…ãˆã¾ã—ãŸ')
    }
  }

  private sendAlert(message: string) {
    // Slackã‚„ãƒ¡ãƒ¼ãƒ«ã§é€šçŸ¥
    console.warn(`âš ï¸ Alert: ${message}`)
  }
}
```

## 17. é–‹ç™ºãƒ»é‹ç”¨ä½“åˆ¶

### 17.1 Gitæˆ¦ç•¥

```yaml
ãƒ–ãƒ©ãƒ³ãƒé‹ç”¨:
  main:
    - æœ¬ç•ªç’°å¢ƒã¨åŒæœŸ
    - ç›´æ¥pushã¯ç¦æ­¢
    - ã‚¿ã‚°ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

  develop:
    - é–‹ç™ºç’°å¢ƒã¨åŒæœŸ
    - feature branchã®ãƒãƒ¼ã‚¸å…ˆ
    - å®šæœŸçš„ã«mainã¸ãƒãƒ¼ã‚¸

  feature/*:
    - æ©Ÿèƒ½é–‹ç™ºç”¨
    - developã‹ã‚‰ä½œæˆ
    - PRå¿…é ˆ

  hotfix/*:
    - ç·Šæ€¥ä¿®æ­£ç”¨
    - mainã‹ã‚‰ä½œæˆ
    - main/developã¸å³ãƒãƒ¼ã‚¸

ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:
  - feat: æ–°æ©Ÿèƒ½
  - fix: ãƒã‚°ä¿®æ­£
  - docs: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  - style: ã‚³ãƒ¼ãƒ‰æ•´å½¢
  - refactor: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
  - test: ãƒ†ã‚¹ãƒˆ
  - chore: ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ„ãƒ¼ãƒ«é–¢é€£
```

### 17.2 CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: volta-cli/action@v4
      - run: pnpm install
      - run: pnpm lint
      - run: pnpm test
      - run: pnpm build

  lighthouse:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Lighthouse Check
        uses: treosh/lighthouse-ci-action@v10
        with:
          urls: |
            https://staging.nichiwari.app
          uploadArtifacts: true
          temporaryPublicStorage: true

  deploy-staging:
    if: github.ref == 'refs/heads/develop'
    needs: [test]
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.ORG_ID }}
          vercel-project-id: ${{ secrets.PROJECT_ID }}

  deploy-production:
    if: github.ref == 'refs/heads/main'
    needs: [test, lighthouse]
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-args: --prod
```

### 17.3 ç›£è¦–ä½“åˆ¶

```yaml
ã‚¨ãƒ©ãƒ¼ç›£è¦–ï¼ˆSentryï¼‰:
  è¨­å®š:
    - ã‚¨ãƒ©ãƒ¼è‡ªå‹•åé›†
    - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬
    - ãƒªãƒªãƒ¼ã‚¹è¿½è·¡

  ã‚¢ãƒ©ãƒ¼ãƒˆ:
    - ã‚¨ãƒ©ãƒ¼ç‡ > 1%
    - æ–°è¦ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ
    - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–

æ­»æ´»ç›£è¦–:
  ãƒ„ãƒ¼ãƒ«: UptimeRobotï¼ˆç„¡æ–™ï¼‰
  è¨­å®š:
    - 5åˆ†é–“éš”ã§ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
    - 3å›é€£ç¶šå¤±æ•—ã§ã‚¢ãƒ©ãƒ¼ãƒˆ
    - Slack/ãƒ¡ãƒ¼ãƒ«é€šçŸ¥

ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–:
  Vercel Analytics:
    - Core Web Vitals
    - ãƒªã‚¢ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒˆãƒªã‚¯ã‚¹

  ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹:
    - è¨ˆç®—å®Ÿè¡Œæ™‚é–“
    - APIå¿œç­”æ™‚é–“
    - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡
```

## 18. Storybookç’°å¢ƒ

### 18.1 ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# Storybookå°å…¥
pnpm add -D @storybook/vue3 @storybook/addon-essentials
```

### 18.2 Voltã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚«ã‚¿ãƒ­ã‚°

```typescript
// components/volt/VButton.stories.ts
import type { Meta, StoryObj } from '@storybook/vue3'
import VButton from './VButton.vue'

const meta = {
  title: 'Volt/Button',
  component: VButton,
  argTypes: {
    variant: {
      control: 'select',
      options: ['primary', 'secondary', 'danger', 'ghost']
    },
    size: {
      control: 'select',
      options: ['sm', 'md', 'lg']
    }
  }
} satisfies Meta<typeof VButton>

export default meta
type Story = StoryObj<typeof meta>

export const Primary: Story = {
  args: {
    label: 'è¨ˆç®—ã™ã‚‹',
    variant: 'primary'
  }
}

export const Loading: Story = {
  args: {
    label: 'è¨ˆç®—ä¸­...',
    loading: true
  }
}
```

### 18.3 ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

```markdown
# ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚¬ã‚¤ãƒ‰

## ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ

- Primary: #3B82F6 (é’)
- Secondary: #10B981 (ç·‘)
- Danger: #EF4444 (èµ¤)
- Warning: #F59E0B (é»„)

## ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£

- è¦‹å‡ºã—: Noto Sans JP Bold
- æœ¬æ–‡: Noto Sans JP Regular
- æ•°å€¤: Tabular nums

## ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°

- xs: 4px
- sm: 8px
- md: 16px
- lg: 24px
- xl: 32px
```

## 19. SEOã¨ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°

### 19.1 SEOå¯¾ç­–

```yaml
æŠ€è¡“çš„SEO:
  - OGPã‚¿ã‚°è¨­å®š
  - æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆJSON-LDï¼‰
  - sitemap.xmlè‡ªå‹•ç”Ÿæˆ
  - robots.txtæœ€é©åŒ–
  - canonical URLè¨­å®š

ã‚³ãƒ³ãƒ†ãƒ³ãƒ„SEO:
  - ã‚¿ã‚¤ãƒˆãƒ«æœ€é©åŒ–
  - ãƒ¡ã‚¿ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³
  - h1-h6ã®é©åˆ‡ãªä½¿ç”¨
  - ç”»åƒã®altå±æ€§

ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹SEO:
  - Core Web Vitalsæœ€é©åŒ–
  - ç”»åƒã®é…å»¶èª­ã¿è¾¼ã¿
  - CDNæ´»ç”¨
```

### 19.2 ã‚½ãƒ¼ã‚·ãƒ£ãƒ«å¯¾å¿œ

```vue
<!-- nuxt.config.ts -->
export default defineNuxtConfig({
  app: {
    head: {
      meta: [
        { property: 'og:title', content: 'ã«ã¡ã‚ã‚Šï¼ - è³¢ã„è²·ã„ç‰©ã®å‘³æ–¹' },
        { property: 'og:description', content: 'æ¸›ä¾¡å„Ÿå´è¨ˆç®—ã§è³¼å…¥åˆ¤æ–­ã‚’ã‚µãƒãƒ¼ãƒˆ' },
        { property: 'og:image', content: '/og-image.png' },
        { property: 'twitter:card', content: 'summary_large_image' }
      ]
    }
  }
})
```

## 20. ãƒªã‚¹ã‚¯ç®¡ç†è¨ˆç”»

### 20.1 æƒ³å®šãƒªã‚¹ã‚¯ã¨å¯¾ç­–

```yaml
æŠ€è¡“çš„ãƒªã‚¹ã‚¯:
  Supabaseéšœå®³:
    å½±éŸ¿: ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ»å–å¾—ä¸å¯
    å¯¾ç­–: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã¸è‡ªå‹•åˆ‡æ›¿

  Vercelãƒ€ã‚¦ãƒ³:
    å½±éŸ¿: ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢
    å¯¾ç­–:
      - Netlifyã¸ã®ãƒ•ã‚§ã‚¤ãƒ«ã‚ªãƒ¼ãƒãƒ¼æº–å‚™
      - é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆã§CDNé…ä¿¡

ãƒ“ã‚¸ãƒã‚¹ãƒªã‚¹ã‚¯:
  åˆ©ç”¨è€…æ€¥å¢—:
    å½±éŸ¿: APIåˆ¶é™è¶…é
    å¯¾ç­–:
      - æ®µéšçš„ãªæ©Ÿèƒ½åˆ¶é™
      - æœ‰æ–™ãƒ—ãƒ©ãƒ³ã¸ã®ç§»è¡Œæº–å‚™

  æ³•çš„å•é¡Œ:
    å½±éŸ¿: ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢å‘½ä»¤
    å¯¾ç­–:
      - åˆ©ç”¨è¦ç´„ã®æ•´å‚™
      - æ³•å‹™ç›¸è«‡ä½“åˆ¶
```

### 20.2 ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œ

```yaml
å¯¾å¿œãƒ•ãƒ­ãƒ¼:
  1. æ¤œçŸ¥:
    - ç›£è¦–ã‚¢ãƒ©ãƒ¼ãƒˆ
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼å ±å‘Š

  2. è©•ä¾¡:
    - å½±éŸ¿ç¯„å›²ç¢ºèª
    - å„ªå…ˆåº¦åˆ¤å®š

  3. å¯¾å¿œ:
    - ç·Šæ€¥ä¿®æ­£
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥

  4. äº‹å¾Œå¯¾å¿œ:
    - åŸå› åˆ†æ
    - å†ç™ºé˜²æ­¢ç­–
```

## 21. E2Eãƒ†ã‚¹ãƒˆæˆ¦ç•¥ï¼ˆPlaywrightï¼‰

### 21.1 Playwrightè¨­å®š

```typescript
// playwright.config.ts
import { defineConfig, devices } from '@playwright/test'

export default defineConfig({
  testDir: './tests/e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: [
    ['html'],
    ['json', { outputFile: 'test-results.json' }],
    ['junit', { outputFile: 'junit.xml' }]
  ],

  use: {
    baseURL: 'http://localhost:3000',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
    video: 'retain-on-failure',

    // ãƒ†ã‚¹ãƒˆã®å…±é€šè¨­å®š
    actionTimeout: 10000,
    navigationTimeout: 30000,

    // ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆè¨­å®š
    viewport: { width: 1280, height: 720 },

    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®åˆæœŸè¨­å®š
    storageState: {
      cookies: [],
      origins: [{
        origin: 'http://localhost:3000',
        localStorage: [{
          name: 'cookieConsent',
          value: 'true'
        }]
      }]
    }
  },

  // ãƒ†ã‚¹ãƒˆã™ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶/ãƒ‡ãƒã‚¤ã‚¹
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] }
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] }
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] }
    },
    {
      name: 'mobile-chrome',
      use: { ...devices['Pixel 5'] }
    },
    {
      name: 'mobile-safari',
      use: { ...devices['iPhone 13'] }
    }
  ],

  // é–‹ç™ºã‚µãƒ¼ãƒãƒ¼è¨­å®š
  webServer: {
    command: 'pnpm dev',
    url: 'http://localhost:3000',
    reuseExistingServer: !process.env.CI,
    timeout: 120000
  }
})
```

### 21.2 Page Object Model (POM)

```typescript
// tests/e2e/pages/CalculatorPage.ts
import { Locator, Page } from '@playwright/test'

export class CalculatorPage {
  readonly page: Page
  readonly productNameInput: Locator
  readonly priceInput: Locator
  readonly yearsInput: Locator
  readonly calculateButton: Locator
  readonly dailyCostResult: Locator
  readonly monthlyCostResult: Locator
  readonly yearlyCostResult: Locator
  readonly errorMessage: Locator

  constructor(page: Page) {
    this.page = page
    this.productNameInput = page.getByLabel('å•†å“å')
    this.priceInput = page.getByLabel('ä¾¡æ ¼')
    this.yearsInput = page.getByLabel('ä½¿ç”¨å¹´æ•°')
    this.calculateButton = page.getByRole('button', { name: 'è¨ˆç®—ã™ã‚‹' })
    this.dailyCostResult = page.getByTestId('daily-cost')
    this.monthlyCostResult = page.getByTestId('monthly-cost')
    this.yearlyCostResult = page.getByTestId('yearly-cost')
    this.errorMessage = page.getByRole('alert')
  }

  async goto() {
    await this.page.goto('/')
  }

  async calculate(productName: string, price: number, years: number) {
    await this.productNameInput.fill(productName)
    await this.priceInput.fill(price.toString())
    await this.yearsInput.fill(years.toString())
    await this.calculateButton.click()
  }

  async waitForResults() {
    await this.dailyCostResult.waitFor({ state: 'visible' })
  }

  async getDailyCost(): Promise<string> {
    return await this.dailyCostResult.textContent() || ''
  }

  async getErrorMessage(): Promise<string> {
    return await this.errorMessage.textContent() || ''
  }
}
```

### 21.3 ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

```typescript
// tests/e2e/calculator.spec.ts
import { expect, test } from '@playwright/test'
import { CalculatorPage } from './pages/CalculatorPage'

test.describe('æ¸›ä¾¡å„Ÿå´è¨ˆç®—æ©Ÿèƒ½', () => {
  test.beforeEach(async ({ page }) => {
    const calculator = new CalculatorPage(page)
    await calculator.goto()
  })

  test('æ­£å¸¸ãªè¨ˆç®—ãŒã§ãã‚‹', async ({ page }) => {
    const calculator = new CalculatorPage(page)

    // è¨ˆç®—å®Ÿè¡Œ
    await calculator.calculate('iPhone 15', 150000, 3)
    await calculator.waitForResults()

    // çµæœæ¤œè¨¼
    const dailyCost = await calculator.getDailyCost()
    expect(dailyCost).toContain('137å††') // 150000 / (3 * 365) = ç´„137å††
  })

  test('ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
    const calculator = new CalculatorPage(page)

    // ä¾¡æ ¼ã«0ã‚’å…¥åŠ›
    await calculator.calculate('ãƒ†ã‚¹ãƒˆå•†å“', 0, 5)

    // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç¢ºèª
    const error = await calculator.getErrorMessage()
    expect(error).toContain('ä¾¡æ ¼ã¯1å††ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„')
  })

  test('å•†å“ã‚µã‚¸ã‚§ã‚¹ãƒˆãŒå‹•ä½œã™ã‚‹', async ({ page }) => {
    const calculator = new CalculatorPage(page)

    // å•†å“åå…¥åŠ›é–‹å§‹
    await calculator.productNameInput.fill('iPhone')

    // ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºã‚’å¾…ã¤
    const suggestion = page.getByRole('option', { name: /iPhone 15/ })
    await expect(suggestion).toBeVisible()

    // ã‚µã‚¸ã‚§ã‚¹ãƒˆé¸æŠ
    await suggestion.click()

    // è‡ªå‹•å…¥åŠ›ç¢ºèª
    await expect(calculator.priceInput).toHaveValue('159800')
    await expect(calculator.yearsInput).toHaveValue('3')
  })

  test('ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§ã‚‚è¨ˆç®—ã§ãã‚‹', async ({ page, context }) => {
    const calculator = new CalculatorPage(page)

    // ã‚ªãƒ•ãƒ©ã‚¤ãƒ³çŠ¶æ…‹ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
    await context.setOffline(true)

    // è¨ˆç®—å®Ÿè¡Œ
    await calculator.calculate('ãƒ†ã‚¹ãƒˆå•†å“', 100000, 5)
    await calculator.waitForResults()

    // çµæœç¢ºèªï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã‚‚å‹•ä½œï¼‰
    const dailyCost = await calculator.getDailyCost()
    expect(dailyCost).toContain('55å††')

    // ã‚ªãƒ•ãƒ©ã‚¤ãƒ³é€šçŸ¥ç¢ºèª
    const offlineNotice = page.getByText('ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œä¸­')
    await expect(offlineNotice).toBeVisible()
  })
})

test.describe('å¹¸ç¦åº¦è¨ºæ–­æ©Ÿèƒ½', () => {
  test('ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã§è¨ºæ–­ã§ãã‚‹', async ({ page }) => {
    await page.goto('/happiness')

    // ãƒã‚§ãƒƒã‚¯é …ç›®ã‚’é¸æŠ
    await page.getByLabel('æ¯æ—¥ã¾ãŸã¯é€±ã«æ•°å›ã¯ä½¿ç”¨ã™ã‚‹äºˆå®š').check()
    await page.getByLabel('ç”Ÿæ´»ã®è³ªã‚„åŠ¹ç‡ãŒæ˜ç¢ºã«å‘ä¸Šã™ã‚‹').check()
    await page.getByLabel('ä½“é¨“ã‚„æ€ã„å‡ºä½œã‚Šã«å¯„ä¸ã™ã‚‹').check()

    // è¨ºæ–­å®Ÿè¡Œ
    await page.getByRole('button', { name: 'è¨ºæ–­ã™ã‚‹' }).click()

    // çµæœç¢ºèª
    const score = page.getByTestId('happiness-score')
    await expect(score).toContainText('37.5%')
    const advice = page.getByTestId('happiness-advice')
    await expect(advice).toContainText('ã‚‚ã†å°‘ã—æ¤œè¨ãŒå¿…è¦')
  })
})
```

### 21.4 ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

```typescript
import AxeBuilder from '@axe-core/playwright'
// tests/e2e/a11y.spec.ts
import { expect, test } from '@playwright/test'

test.describe('ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ', () => {
  test('ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ãŒWCAG AAæº–æ‹ ', async ({ page }) => {
    await page.goto('/')

    const accessibilityScanResults = await new AxeBuilder({ page })
      .withTags(['wcag2aa'])
      .analyze()

    expect(accessibilityScanResults.violations).toEqual([])
  })

  test('ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¯èƒ½', async ({ page }) => {
    await page.goto('/')

    // Tabã‚­ãƒ¼ã§ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹•
    await page.keyboard.press('Tab')
    await expect(page.locator(':focus')).toHaveAttribute('aria-label', 'å•†å“å')

    await page.keyboard.press('Tab')
    await expect(page.locator(':focus')).toHaveAttribute('aria-label', 'ä¾¡æ ¼')

    await page.keyboard.press('Tab')
    await expect(page.locator(':focus')).toHaveAttribute('aria-label', 'ä½¿ç”¨å¹´æ•°')

    await page.keyboard.press('Tab')
    await expect(page.locator(':focus')).toHaveText('è¨ˆç®—ã™ã‚‹')

    // Enterã‚­ãƒ¼ã§å®Ÿè¡Œ
    await page.keyboard.press('Enter')
  })

  test('ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ç”¨ã®è¦ç´ ãŒé©åˆ‡', async ({ page }) => {
    await page.goto('/')

    // aria-liveãƒªãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
    const liveRegion = page.locator('[aria-live]')
    await expect(liveRegion).toHaveAttribute('aria-live', 'polite')

    // aria-labelç¢ºèª
    const inputs = page.locator('input')
    const count = await inputs.count()
    for (let i = 0; i < count; i++) {
      const input = inputs.nth(i)
      const label = await input.getAttribute('aria-label')
        || await input.getAttribute('aria-labelledby')
      expect(label).toBeTruthy()
    }
  })
})
```

### 21.5 ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ

```typescript
// tests/e2e/visual.spec.ts
import { expect, test } from '@playwright/test'

test.describe('ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ', () => {
  test('ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ', async ({ page }) => {
    await page.goto('/')
    await expect(page).toHaveScreenshot('homepage.png', {
      fullPage: true,
      animations: 'disabled'
    })
  })

  test('è¨ˆç®—çµæœè¡¨ç¤ºã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ', async ({ page }) => {
    await page.goto('/')

    // è¨ˆç®—å®Ÿè¡Œ
    await page.getByLabel('å•†å“å').fill('ãƒ†ã‚¹ãƒˆå•†å“')
    await page.getByLabel('ä¾¡æ ¼').fill('100000')
    await page.getByLabel('ä½¿ç”¨å¹´æ•°').fill('5')
    await page.getByRole('button', { name: 'è¨ˆç®—ã™ã‚‹' }).click()

    // çµæœè¡¨ç¤ºã‚’å¾…ã¤
    await page.getByTestId('daily-cost').waitFor()

    // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆæ¯”è¼ƒ
    await expect(page.locator('.result-section')).toHaveScreenshot('result.png')
  })

  test('ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤ºã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ', async ({ page }) => {
    await page.setViewportSize({ width: 375, height: 667 })
    await page.goto('/')
    await expect(page).toHaveScreenshot('mobile-homepage.png', {
      fullPage: true
    })
  })
})
```

### 21.6 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

```typescript
// tests/e2e/performance.spec.ts
import { expect, test } from '@playwright/test'

test.describe('ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ', () => {
  test('åˆå›ãƒ­ãƒ¼ãƒ‰æ™‚é–“ãŒ3ç§’ä»¥å†…', async ({ page }) => {
    const startTime = Date.now()
    await page.goto('/')
    await page.waitForLoadState('networkidle')
    const loadTime = Date.now() - startTime

    expect(loadTime).toBeLessThan(3000)
  })

  test('è¨ˆç®—å®Ÿè¡ŒãŒ100msä»¥å†…', async ({ page }) => {
    await page.goto('/')

    // å…¥åŠ›
    await page.getByLabel('å•†å“å').fill('ãƒ†ã‚¹ãƒˆ')
    await page.getByLabel('ä¾¡æ ¼').fill('100000')
    await page.getByLabel('ä½¿ç”¨å¹´æ•°').fill('5')

    // è¨ˆç®—æ™‚é–“è¨ˆæ¸¬
    const startTime = Date.now()
    await page.getByRole('button', { name: 'è¨ˆç®—ã™ã‚‹' }).click()
    await page.getByTestId('daily-cost').waitFor()
    const calcTime = Date.now() - startTime

    expect(calcTime).toBeLessThan(100)
  })

  test('Core Web Vitalsã®æ¸¬å®š', async ({ page }) => {
    await page.goto('/')

    // LCPæ¸¬å®š
    const lcp = await page.evaluate(() => {
      return new Promise((resolve) => {
        new PerformanceObserver((list) => {
          const entries = list.getEntries()
          const lastEntry = entries[entries.length - 1]
          resolve(lastEntry.startTime)
        }).observe({ type: 'largest-contentful-paint', buffered: true })
      })
    })

    expect(lcp).toBeLessThan(2500) // 2.5ç§’ä»¥å†…
  })
})
```

### 21.7 ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†

```typescript
// tests/e2e/fixtures/testData.ts
export const testProducts = {
  valid: [
    { name: 'iPhone 15', price: 150000, years: 3, expectedDaily: 137 },
    { name: 'MacBook Pro', price: 300000, years: 5, expectedDaily: 164 },
    { name: 'å†·è”µåº«', price: 200000, years: 15, expectedDaily: 37 }
  ],
  invalid: [
    { name: '', price: 100000, years: 5, error: 'å•†å“åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„' },
    { name: 'ãƒ†ã‚¹ãƒˆ', price: 0, years: 5, error: 'ä¾¡æ ¼ã¯1å††ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„' },
    { name: 'ãƒ†ã‚¹ãƒˆ', price: 100000, years: 0, error: 'ä½¿ç”¨å¹´æ•°ã¯0.5å¹´ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„' }
  ],
  edge: [
    { name: 'A'.repeat(100), price: 1, years: 0.5 }, // æœ€å°å€¤
    { name: 'ãƒ†ã‚¹ãƒˆ', price: 1000000000, years: 100 } // æœ€å¤§å€¤
  ]
}

// tests/e2e/fixtures/users.ts
export const testUsers = {
  default: {
    preferences: {
      darkMode: false,
      locale: 'ja'
    }
  },
  returning: {
    history: [
      { name: 'iPhone 14', price: 120000, years: 3 }
    ],
    preferences: {
      darkMode: true,
      locale: 'ja'
    }
  }
}
```

### 21.8 CI/CDã§ã®E2Eå®Ÿè¡Œ

```yaml
# .github/workflows/e2e.yml
name: E2E Tests

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  e2e:
    runs-on: ubuntu-latest
    container:
      image: mcr.microsoft.com/playwright:v1.40.0-focal

    steps:
      - uses: actions/checkout@v3

      - name: Setup Node
        uses: actions/setup-node@v3
        with:
          node-version: 20

      - name: Install pnpm
        run: npm install -g pnpm

      - name: Install dependencies
        run: pnpm install

      - name: Build application
        run: pnpm build

      - name: Run E2E tests
        run: pnpm test:e2e

      - name: Upload test results
        if: always()
        uses: actions/upload-artifact@v3
        with:
          name: playwright-report
          path: playwright-report/
          retention-days: 30

      - name: Upload screenshots
        if: failure()
        uses: actions/upload-artifact@v3
        with:
          name: screenshots
          path: test-results/
```

### 21.9 ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

```json
// package.json scripts
{
  "scripts": {
    "test:e2e": "playwright test",
    "test:e2e:headed": "playwright test --headed",
    "test:e2e:debug": "playwright test --debug",
    "test:e2e:ui": "playwright test --ui",
    "test:e2e:chrome": "playwright test --project=chromium",
    "test:e2e:mobile": "playwright test --project=mobile-*",
    "test:e2e:a11y": "playwright test a11y.spec.ts",
    "test:e2e:visual": "playwright test visual.spec.ts",
    "test:e2e:update-snapshots": "playwright test --update-snapshots",
    "test:e2e:report": "playwright show-report"
  }
}
```

### 21.10 E2Eãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

```yaml
ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™:
  ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹: 100% # è¨ˆç®—æ©Ÿèƒ½ã€çµæœè¡¨ç¤º
  ä¸»è¦æ©Ÿèƒ½: 80% # å¹¸ç¦åº¦è¨ºæ–­ã€å•†å“ã‚µã‚¸ã‚§ã‚¹ãƒˆ
  ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹: 60% # å¢ƒç•Œå€¤ã€ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹

  ãƒ‡ãƒã‚¤ã‚¹:
    - ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—: Chrome, Firefox, Safari
    - ãƒ¢ãƒã‚¤ãƒ«: iOS Safari, Android Chrome

  ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£:
    - WCAG AAæº–æ‹ : 100%
    - ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³: 100%
    - ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼: ä¸»è¦ãƒ•ãƒ­ãƒ¼

å®Ÿè¡Œé »åº¦:
  ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º: ãƒ—ãƒƒã‚·ãƒ¥å‰ã«ä¸»è¦ãƒ†ã‚¹ãƒˆ
  PRä½œæˆæ™‚: ãƒ•ãƒ«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
  æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰: ãƒ•ãƒ«ãƒ†ã‚¹ãƒˆ + ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ†ã‚¹ãƒˆ
```

## æ³¨æ„äº‹é …

1. **Voltã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ç›´æ¥ç·¨é›†å¯èƒ½** - node_modulesã§ã¯ãªããƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã«ã‚³ãƒ”ãƒ¼ã—ã¦ä½¿ç”¨
2. **TDDå³å®ˆ** - å®Ÿè£…å‰ã«å¿…ãšãƒ†ã‚¹ãƒˆã‚’æ›¸ã
3. **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ** - ã™ã¹ã¦ã®UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§WCAG AAæº–æ‹ ã‚’ç¢ºèª
4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬** - å„ãƒ•ã‚§ãƒ¼ã‚ºçµ‚äº†æ™‚ã«Lighthouseå®Ÿè¡Œ
5. **ã‚³ãƒŸãƒƒãƒˆç²’åº¦** - æ©Ÿèƒ½å˜ä½ã§ã‚³ãƒŸãƒƒãƒˆã€Conventional Commitsæº–æ‹ 
6. **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ** - è¨ˆç®—æ©Ÿèƒ½ã¯å¿…ãšå‹•ä½œä¿è¨¼
7. **æ³•çš„æ–‡æ›¸** - ãƒªãƒªãƒ¼ã‚¹å‰ã«å¿…ãšæº–å‚™
8. **E2Eãƒ†ã‚¹ãƒˆ** - ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹ã¯å¿…ãšã‚«ãƒãƒ¼

---

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«åŸºã¥ã„ã¦å®Ÿè£…ã‚’é€²ã‚ã¦ãã ã•ã„ã€‚ä¸æ˜ãªç‚¹ãŒã‚ã‚Œã°è³ªå•ã—ã¦ãã ã•ã„ã€‚
